Redactor.add("plugin","counter",{translations:{en:{counter:{words:"words",chars:"chars"}}},subscribe:{"editor.insert, editor.set, editor.empty"(){this.count()}},start(){this.$editor=this.app.editor.getEditor(),this.$editor.on("keyup.rx-plugin-counter paste.rx-plugin-counter",this.count.bind(this)),this.count()},stop(){this.$editor.off("."+this.prefix+"-plugin-counter"),this.app.statusbar.remove("words"),this.app.statusbar.remove("chars")},count(){let t=0,r=0,s=0,e=this.$editor.html(),a,i,o;""!==(e=this._clean(e))&&(a=e.split(/\s+/),i=e.match(/\s/g),t=a?a.length:0,s=i?i.length:0,r=e.length),o={words:t,characters:r,spaces:s},this.app.broadcast("counter",o),this.app.statusbar.add("words",this.lang.get("counter.words")+": "+o.words),this.app.statusbar.add("chars",this.lang.get("counter.chars")+": "+o.characters)},_clean(t){var r=this.app.create("utils");return t=(t=(t=(t=(t=(t=(t=t.replace(/<\/(.*?)>/gi," ")).replace(/<(.*?)>/gi,"")).replace(/\t/gi,"")).replace(/\n/gi," ")).replace(/\r/gi," ")).replace(/&nbsp;/g,"1")).trim(),t=r.removeInvisibleChars(t)}});